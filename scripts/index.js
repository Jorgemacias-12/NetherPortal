let results;let isDarkTheme=false;let counter=0;const $=(id)=>{return document.getElementById(id);};document.addEventListener('DOMContentLoaded',()=>{localStorage.setItem('operation','nether');addInputListeners();if(localStorage.getItem('coordinates_record')==null)results=[];if(localStorage.getItem('coordinates_record')!=null){results=JSON.parse(localStorage.getItem('coordinates_record'));showRecords();};initTabs();loadTheme();$('header-menu').addEventListener('click',()=>{themeSwitcher();});$('calculate').addEventListener('click',()=>{validateForm();});});function loadTheme(){let theme;let indicatorRef;theme=localStorage.getItem('theme');isDarkTheme=theme==="dark"?true:false;indicatorRef=$('header-menu');indicatorRef.classList=theme==="dark"?"fas fa-sun":"fas fa-moon";document.documentElement.style.colorScheme=theme;applyTheme(theme);};function themeSwitcher(){let theme;let indicatorRef;let data_color;let icon;isDarkTheme=!isDarkTheme;indicatorRef=$('header-menu');theme=isDarkTheme?"dark":"light";icon=isDarkTheme?"fas fa-sun":"fas fa-moon";data_color=isDarkTheme?"0":"1";indicatorRef.setAttribute('data-color',data_color);indicatorRef.classList=icon;localStorage.setItem('theme',theme);document.documentElement.style.colorScheme=theme;applyTheme(theme);};function applyTheme(theme){let sectionContainers;let tabController;let buttonCaptions;let subtitle;let deleteRecordsButton;let formInputs;let formLabels;let recordsContainer;sectionContainers=document.querySelectorAll('.content-section');buttonCaptions=document.querySelectorAll('.caption');formInputs=document.querySelectorAll('input');formLabels=document.querySelectorAll('.label');subtitle=document.querySelector('.subtitle');deleteRecordsButton=document.querySelector('.record-clean-container');tabController=$('Tabs');recordsContainer=$('history-wrapper');switch(theme){case"light":document.body.classList="light";sectionContainers.forEach(element=>element.classList="content-section light");buttonCaptions.forEach(element=>element.classList="caption light");formLabels.forEach(element=>element.classList="label light");formInputs.forEach(element=>element.classList="input light");subtitle.classList="subtitle light";deleteRecordsButton.classList="record-clean-container light";tabController.classList="TabContainer light";recordsContainer.classList="light";break;case"dark":document.body.classList="dark";sectionContainers.forEach(element=>element.classList="content-section dark");buttonCaptions.forEach(element=>element.classList="caption dark");formLabels.forEach(element=>element.classList="label dark");formInputs.forEach(element=>element.classList="input dark");subtitle.classList="subtitle dark";deleteRecordsButton.classList="record-clean-container dark";tabController.classList="TabContainer dark";recordsContainer.classList="dark";break;}};function addInputListeners(){setInputFilter($('coord_x'),(value)=>{return/^-?\d*[.,]?\d*$/.test(value);});setInputFilter($('coord_z'),(value)=>{return/^-?\d*[.,]?\d*$/.test(value);});};function validateForm(){let fieldCoordX;let fieldCoordZ;fieldCoordX=$('coord_x');fieldCoordZ=$('coord_z');if(fieldCoordX.value==""&&fieldCoordZ.value==""){createModal("Campos vacios",true);return;};if(fieldCoordX.value==""){createModal("El campo de coordenada x est치 vaci칩.",true);fieldCoordX.focus();return;};if(fieldCoordZ.value==""){createModal("El campo de coordenada z est치 vaci칩.",true);fieldCoordZ.focus();return;};fieldCoordX=fieldCoordX.value;fieldCoordZ=fieldCoordZ.value;calculateNewCoords(fieldCoordX,fieldCoordZ);};function calculateNewCoords(coordinateX,coordinateZ){let operation;operation=localStorage.getItem('operation');switch(operation){case"nether":coordinateX=coordinateX/8;coordinateZ=coordinateZ/8;break;case"overworld":coordinateX=coordinateX*8;coordinateZ=coordinateZ*8;break;};createModal(`X:${coordinateX}-Z:${coordinateZ}`,false);let resultObject;resultObject={id:++counter,coordX:coordinateX,coordZ:coordinateZ,method:operation};results.push(resultObject);localStorage.setItem('coordinates_record',JSON.stringify(results));showRecords();setTimeout(()=>{closeModal();},4000);};function showRecords(){let container;let request;let component;let close_icon;let coordinateX;let coordinateZ;let method;request=new XMLHttpRequest();container=$('history-wrapper');container.innerHTML=``;request.open('GET',`${window.location.href}/templates/record.html`);request.send();request.addEventListener('loadend',()=>{if(results==null)return;for(let result of results){component=document.createElement('article');component.classList.add('record');component.innerHTML=request.responseText;container.appendChild(component);};coordinateX=document.querySelectorAll('.record-x');coordinateZ=document.querySelectorAll('.record-z');method=document.querySelectorAll('.record-method');close_icon=document.querySelectorAll('.record-close');for(let i=0;i<coordinateX.length;i++){coordinateX[i].innerText=`${coordinateX[i].innerText}${results[i].coordX}`;coordinateZ[i].innerText=`${coordinateZ[i].innerText}${results[i].coordZ}`;method[i].innerText=`${method[i].innerText}${results[i].method}`;close_icon[i].addEventListener('click',(e)=>{closeRecord(i,e.target);});}});};async function clearStorage(){localStorage.removeItem('coordinates_record');results=[];let records_wrapper=$('history-wrapper');if(!records_wrapper.hasChildNodes())return;let recordsRef;recordsRef=records_wrapper.childNodes;for(let i=0;i<recordsRef.length;i++){recordsRef[i].classList.add('record-closing');recordsRef[i].addEventListener('animationend',()=>{records_wrapper.innerHTML=``;});}};function closeRecord(index,target){target=target.parentNode;target.classList.add('record-closing');target.addEventListener('animationend',()=>{$('history-wrapper').removeChild(target);});index=results.findIndex(results=>results.id===index+1);results.splice(index,1);localStorage.setItem('coordinates_record',JSON.stringify(results));};function createModal(message,isError){let request;let modalContainerRef;let modalType;let modalTemplate;let modalTextRef;modalType=isError?"error":"result";modalContainerRef=$('modal-container');request=new XMLHttpRequest();request.addEventListener('loadend',()=>{modalTemplate=request.responseText;modalContainerRef.innerHTML=modalTemplate;modalTextRef=$('modal-text');modalTextRef.innerText=message;});request.open('GET',`${window.location.href}templates/${modalType}.html`);request.send();};function closeModal(isError){let modalType;modalType=isError?"error":"result";let modal=$(modalType);if(modal==null||modal==undefined)return;modal.style.animation=`close-modal 0.5s linear`;modal.addEventListener('animationend',()=>{let wrapper=$('modal-container');wrapper.innerHTML='';});};function GetForm(form){let request;request=new XMLHttpRequest();request.addEventListener('loadend',()=>{let wrapper=$('form-wrapper');wrapper.classList.add('show');wrapper.innerHTML=request.responseText;setInputFilter($('coord_x'),(value)=>{return/^-?\d*[.,]?\d*$/.test(value);});setInputFilter($('coord_z'),(value)=>{return/^-?\d*[.,]?\d*$/.test(value);});applyTheme(localStorage.getItem('theme'));});request.open('GET',`${window.location.href}/templates/${form}.html`,true);request.send();};function changeTab(event){event.stopPropagation();let tabs;let currentButton;tabs=document.querySelectorAll('.Tab');tabs.forEach((button)=>{button.setAttribute('data-active','');});currentButton=event.target;currentButton.setAttribute('data-active','true');switch(currentButton.id){case"nether":localStorage.setItem('operation',currentButton.id);GetForm(currentButton.id);break;case"overworld":localStorage.setItem('operation',currentButton.id);GetForm(currentButton.id);break;}};function initTabs(){let tabs;tabs=document.getElementsByClassName('Tab');for(let i=0;i<tabs.length;i++){tabs[i].addEventListener('click',(event)=>{changeTab(event);});}};window.closeModal=closeModal;window.clearStorage=clearStorage;window.validateForm=validateForm;